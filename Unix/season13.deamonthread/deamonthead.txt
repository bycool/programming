守护进程:
	13.1 引言
	守护进程也称精灵进程(deamon),是生存期较长的一种进程.

	13.2 守护进程的特征
	系统进程依赖于操作系统的实现.父进程ID为0的各进程通常是内核进程(init为例外.),内核进程是特殊的,通常存在于系统的整个生命周期中.以超级用户特权运行,无控制终端,无命令行.
	init:init是一个系统守护进程,负责启动各运行层次特定的系统服务.这些服务通常是在他们自己拥有的守护进程的帮助下实现的.
	keventd守护进程为在内核中运行计划执行的函数提供进程上下文.
	kapmd守护进程对很多计算机系统中具有的高级电源管理提供支持.
	kswapd守护进程也称为页面调出收据进程,通常将脏页面以低速写到磁盘上从而是这些页面在需要时仍可回收使用.
	dbflush守护进程在可用内存达到下线时,将脏缓冲区从缓冲池中冲洗到磁盘上.
	kupdated守护进程每隔一段时间,将脏页面冲洗到磁盘上,以便在系统失效时减少丢失的数据.
	portmap为端口映射守护进程,提供将RPC(Remote Procedure Call,远程过程调用)程序号映射为网络端口的服务.
	syslogd守护进程可由帮助操作人员把系统消息记入日志的任何程序使用.
	inetd收据进程,监听系统网络端口,以便去的来自网络对各种网络服务的请求.
	nfsd,lockd,rpciod守护进程提供对网络文件系统(NFS)的支持.
	cron守护进程(crond)在指定的日期和时间执行指定的命令.

	13.3 编程规则
	1.首先,调用umask将文件模式创建屏蔽字设置为0.
	2.调用fork,然后使父进程退出(exit).这样做,第一让shell认为这条命令执行完成.第二,子进程处于和父进程同工作组,且不是组长进程,这对之后要做的setsid调用是必要的前提条件.
	3.调用setsid以创建一个新会话,setsid做了三件事:是调用的进程成为新会话的首进程,成为新进程组的组长进程,没有控制终端.
	4.将当前工作目录更改为根目录.
	5.关闭不再需要的文件描述符.这使守护进程不再持有其父进程继承来的某些文件描述符号.
	6.某些守护进程打开/dev/null使其具有文件描述符0,1和2,这样,任何一个试图读标准输入,写标准输出或标准出错的库例程都不会产生任何效果.

	13.6 守护进程的惯例
	1.守护进程使用锁文件.那么该文件通常存放于/var/run目录下.
	2.若守护进程支持配置选项,那么配置文件通常存放在/etc目录中.
	3.守护进程可用命令行启动,但通常它们是由系统初始化脚本之一启动的.(/etc/rc*或/etc/init.d/*)
	4.若一守护进程有一配置文件,那么当守护进程启动时,它读该文件,但在此之后一般就不会再查看它.

	13.7 客户进程-服务器进程模型
	守护进程常常用作服务进程.一般而言服务器是等待客户进程与其联系的一个进程,客户进程向它提出某种类型的服务要求.


